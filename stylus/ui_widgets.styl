/// Vars
menu-vmargin = 5px
menu-icon-margin-right = 1rem
menu-icon-size = 2rem

itemtable-width = 400px

#info-area, #widget-area
	position absolute
	left 0 //controls-padding
	z-index 11
	transition all 0.4s
	width legend-width
	color menu-col
	
	em
		color menu-highlight
		
	span
		color rgba(255,255,255,.7)


	#legend, #cellinfo-desc, #cellinfo, #main-menu
		background menu-bg
		color menu-col

	#legend, #main-menu, #cellinfo
		box-shadow boxshadow
	#cellinfo-desc
		box-shadow boxshadow-inv

/////////////////////////////////////////
/// info area - item table and legend //
///////////////////////////////////////
#info-area.table-open
	#cellinfo-desc, #cellinfo
		width itemtable-width
	#cellinfo
		display block

#info-area
	top 0	
	
	#legend, #cellinfo-desc
		padding (box-padding/2) box-padding
		


	#cellinfo-desc div.inactive
		color rgba(255,255,255,.5)
		
	#cellinfo
		display none // gets expanded in selectCell()
		padding: 0;
		border-top: none;
		position: relative;

		table 
			//height 100%
			width: 100%;

			tr 
				cursor pointer
				width: 100%;
				display: flex;
				flex-flow row nowrap
				justify-content space-between
				text-align: left;
				position relative
				
				td,th 
					margin: 0 box-padding
					font-size: 0.9em;

					/*&:first-child 
						float: left;*/

					&:last-child 
						text-align right
						flex-shrink 0
						float right // fix alignment for firefox
				a 
					color: #59CDFF
					text-decoration none
						
					&:after
						content attr(data-desc)
						margin-left 1em
						color rgb(229, 229, 229)
						font-style italic
						
			thead 
				//flex: 0 1 auto;
				//font-size: 1.1em;	
				th 
					font-size: 1em;
					font-weight: bold;
					white-space: nowrap;
				th:last-child 
					margin-right: 26px;
				tr
					margin-top -0.3em
				select 
					display: inline;
					vertical-align: middle;
					font-size: 0.8em;
			tbody 
				display block
				top: 1.4em;
				bottom: 0;
				overflow-y: scroll;
				tr 
					border-bottom: 1px solid rgba(255,255,255,0.15);
					//padding: 0.02em 0;
					&:hover
						background rgba(4, 11, 31, 0.6)

					&:last-child
						border none
					
				&::-webkit-scrollbar {
					width 16px
				}
				&::-webkit-scrollbar-track {
					box-shadow: inset 0 0 6px rgba(255,255,255,0.6); 
				}
				&::-webkit-scrollbar-thumb {
					margin 0 auto
					width 10px
					background rgba(4, 20, 71, 0.6)
					box-shadow: inset 0 0 6px rgba(10,20,140,0.5);
				}
/*::-webkit-scrollbar-button       
::-webkit-scrollbar-track        
::-webkit-scrollbar-track-piece 
::-webkit-scrollbar-thumb        
::-webkit-scrollbar-corner       
::-webkit-resizer               */

////////////////////////////////////////////
/// widget area - main control interface //
//////////////////////////////////////////
#widget-area
	bottom 0		
	
/////////////////
/// main menu //
///////////////
#widget-area #main-menu 
	position relative
	top 5px	
	line-height: 1.2em;
	transition all 0.4s
	background alpha(menu-bg,0.9)

	&:hover 
		top 0

	/// LAUNCHER / description ///
	#menu-launcher
		position relative
		cursor pointer
		padding box-padding
		padding-right 0
		
		#menu-icon
			position absolute
			right menu-icon-margin-right
			top 50%
			margin-top -1rem
			height menu-icon-size
			width menu-icon-size
			
			use
				stroke-width 1
				stroke rgb(200,200,200)
				
		&:hover	#menu-icon use
			stroke white
		
		#dsdesc
			margin-right (menu-icon-margin-right + menu-icon-size)
			h4
				margin-bottom .2rem
			p 
				font-size 0.85rem

		.loading-box
			margin-right menu-icon-margin-right
			height 1rem
			border 1px rgba(255, 255, 255, 0.4) solid
			
			.loading-bar
				height 100%
				width 0
				background #2189B3
				font-size 0.8rem
				line-height 1rem
				text-align center
	//|\ LAUNCHER ///

	&>div
		margin-bottom menu-vmargin
		&:last-child
			margin-bottom 0
			
		&>fieldset
			padding (box-padding/2) box-padding
			margin .5em 0 0

	&.hide-advanced .advanced 
		display none !important
		
	fieldset
		border none
			
	.fieldgroup
		border: 2px rgba(208, 208, 208, 0.1) solid
		&>legend 
			font-family: sans-serif;
		input[type=checkbox] 
			margin-bottom box-padding
	
	h2+.fieldgroup 
		margin-top: 0;
		
	h2
		background: #C4D9DA
		font-family: sans-serif;
		font-size: 14px;
		line-height: 20px;
		padding: 0px box-padding;
		color: black
		cursor: pointer;
		height: 20px;
		box-shadow 0px 1px 3px 1px rgba(0, 0, 0, 0.8)
		&:hover 
			background #E2F3F4
		
		&:after 
			content: '';
			height: 8px;
			width: 8px;
			border: 2px black solid;
			float: right;
			transform: rotate(135deg);
			border-style: solid solid none none;
			transition: transform 0.4s, top 0.4s, border-width 0s;
			position: relative;
			top: 3px;
			right: menu-icon-margin-right
		&.closed:after 
			transform: rotate(45deg);
			top: 5px;
		&:hover:after 
			border-width: 3px;

#widget-area.open
	margin-bottom 0 !important
		
	#main-menu
		top 0px
		
		#menu-launcher
			#menu-icon use
				stroke white
			&:hover #menu-icon use
				stroke rgb(200,200,200)


#widget-area.init,
#info-area.init
	opacity 0
	transition none


////////////////////////
/// dataset selector //
//////////////////////
#filter fieldset
	.group-container		
		&.open
			background rgba(4, 20, 71, 0.4)
			border-radius: 0 0 2px 2px;
			h4
				border 1px rgba(27, 36, 60, 1) solid
		h4
			background rgba(119, 119, 119, 0.3)
			padding .4em .5em
			box-shadow boxshadow

		&>div
			cursor pointer
			display none
			padding 0 20px
			height 20px
			font-size 14px
			line-height 20px
			
			&:hover
				background rgba(menu-highlight, 0.2)
				
			.tray
				display inline-block
				float right

			&.selected .tray:before
				content ''
				position absolute
				left 8px
				bottom 8px
				width 4px
				height 4px
				border-radius 2px
				box-shadow 0 0 5px 2px rgb(226, 220, 0), inset 0 0 4px 3px rgb(175, 207, 126);
				
/// dataset tooltips
.tooltip 
	display: inline;
	position: relative;

	&:before, &:after 
		transition: all  .2s;
		opacity: 0;
		pointer-events: none;


	&:hover:before, &:hover:after
		opacity: 1;
		//pointer-events: auto;

	&:after 
		content: attr(data-tt);
		display: block;
		position: absolute;
		background: menu-bg
		color: menu-col
		font-size: 1.1em;
		line-height: 1.1em;
		width: 10rem
		top: -100%;
		left: 100%;
		margin-top: 17px // matches baseline of dataset label text
		margin-left: box-padding
		padding: .4em .8em;
		text-align: left;
		box-shadow: boxshadow
		z-index: 9998;

	&:before 
		border: solid;
		border-color: transparent transparent transparent rgba(menu-highlight, 0.2);
		border-width: 10px 0 10px 10px;
		content: "";
		display: block;
		width: 0;
		left: 100%;
		top: 50%;
		margin-top: -10px;
		position: absolute;
		z-index: 9999;


///////////////////////
/// form appearance //
/////////////////////
@import ui_forms


///////////////////////////
/// individual elements //
/////////////////////////
#controls-meta
	font-size 0.9rem
	box-shadow -2px 0px 3px 1px black
	background rgba(55, 57, 57, 0.3)
	&>fieldset
		padding (box-padding/2) box-padding !important